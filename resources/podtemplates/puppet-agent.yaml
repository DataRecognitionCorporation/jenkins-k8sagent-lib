spec:
- containers:
  - alwaysPullImage: true
    args: ^${computer.jnlpmac} ^${computer.name}
    command: ""
    envVars:
    - envVar:
        key: JENKINS_URL
        value: http://{{ template "jenkins.fullname" . }}.{{ template "jenkins.namespace" . }}.svc.{{.Values.clusterZone}}:{{.Values.master.servicePort}}{{ default "/" .Values.master.jenkinsUriPrefix }}
    image: 385888483640.dkr.ecr.us-east-1.amazonaws.com/jenkins/agent/puppet:latest
    livenessProbe:
      failureThreshold: 0
      initialDelaySeconds: 0
      periodSeconds: 0
      successThreshold: 0
      timeoutSeconds: 0
    name: jnlp
    resourceLimitCpu: 1024m
    resourceLimitMemory: 4096Mi
    resourceRequestCpu: 512m
    resourceRequestMemory: 2048Mi
    workingDir: /home/jenkins/agent
  hostNetwork: false
  label: coel7_agent
  name: puppet-agent
  podRetention: onFailure
  serviceAccount: {{ include "jenkins.serviceAccountAgentName" . }}
  yaml: |
    spec:
      securityContext:
        fsGroup: 65534
  yamlMergeStrategy: override
  yamls:
  - |
    spec:
      securityContext:
        fsGroup: 65534